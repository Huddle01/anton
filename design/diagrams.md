# SFU Component Diagram

```
+-----------------------------------------------------+
|                      SFU Server                     |
|                                                     |
|  +----------------+        +-------------------+    |
|  | Session Manager|<------>| Connection Manager|    |
|  +----------------+        +-------------------+    |
|         ^                          ^                |
|         |                          |                |
|         v                          v                |
|  +----------------+        +-------------------+    |
|  |  Media Router  |<------>|  Media Transport  |    |
|  +----------------+        +-------------------+    |
|         ^                          ^                |
|         |                          |                |
|         v                          v                |
|  +----------------+        +-------------------+    |
|  |Bandwidth Manager|<----->|Statistics Collector|   |
|  +----------------+        +-------------------+    |
|                                                     |
+-----------------------------------------------------+
           ^                          ^
           |                          |
           v                          v
+-------------------+      +-------------------+
|    Publisher 1    |      |    Subscriber 1   |
+-------------------+      +-------------------+
           ^                          ^
           |                          |
           v                          v
+-------------------+      +-------------------+
|    Publisher 2    |      |    Subscriber 2   |
+-------------------+      +-------------------+
           .                          .
           .                          .
           .                          .
+-------------------+      +-------------------+
|    Publisher N    |      |    Subscriber M   |
+-------------------+      +-------------------+
```

# SFU Data Flow Diagram

```
+-------------+                  +------------+                  +---------------+
|             |  1. Publish RTP  |            |  4. Forward RTP  |               |
|  Publisher  |----------------->|    SFU     |----------------->|  Subscriber   |
|             |                  |            |                  |               |
+-------------+                  +------------+                  +---------------+
       |                               ^                                |
       |                               |                                |
       |       2. RTCP Feedback        |        3. RTCP Feedback        |
       +------------------------------>+<-------------------------------+
```

# Iroh Integration Diagram

```
+-----------------------------------------------------+
|                      SFU Server                     |
|                                                     |
|  +----------------+        +-------------------+    |
|  | Session Manager|        | Iroh Endpoint     |    |
|  +----------------+        +-------------------+    |
|         |                          |                |
|         |                          |                |
|         v                          v                |
|  +----------------+        +-------------------+    |
|  |  Media Router  |        |  Iroh Router      |    |
|  +----------------+        +-------------------+    |
|         |                          |                |
|         |                          |                |
|         v                          v                |
|  +----------------+        +-------------------+    |
|  |  RTP Handler   |------->|  iroh-roq (QUIC)  |    |
|  +----------------+        +-------------------+    |
|                                                     |
+-----------------------------------------------------+
```
